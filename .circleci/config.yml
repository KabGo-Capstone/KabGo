version: 2.1

orbs:
    node: circleci/node@5.2.0

parameters:
    run-build-supply-service-job:
        type: boolean
        default: true

jobs:
    run-build-supply:
        working_directory: ~/KabGo/servers/supply
        executor: node/default
        steps:
            - checkout
            - node/install-packages:
                  app-dir: ~/KabGo/servers/supply
                  cache-path: node_modules
                  override-ci-command: npm i
            - run:
                  command: npm run build

workflows:
    build_supply_service:
        when: << pipeline.parameters.run-build-supply-service-job >>
        jobs:
            - run-build-supply

